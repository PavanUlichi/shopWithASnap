<!DOCTYPE html>
<html>
<head>
<title>Go Cam Shop</title>

<style>
#container {

    height: 100vh;
    width: auto;
    float: right;

}
#videoElement {
   height: 100vh;
   width: auto;
    background-color: #666;
}


</style>
</head>
<body >
<div id="container">
    <video autoplay="true" id="videoElement">
    </video>
</div>
<canvas id="myCanvas" style="border:1px solid #000000">
</canvas>

<button onclick="subfun()">Click me</button>

<script>

navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia || navigator.oGetUserMedia;
var video = document.querySelector("#videoElement");

if (navigator.getUserMedia) {
    navigator.getUserMedia({video: true}, handleVideo, videoError);
    }

function videoError(e) {
    // do something
}
function handleVideo(stream) {
    video.src = window.URL.createObjectURL(stream);

}

function subfun(){
  var canvas = document.getElementById("myCanvas");
    canvas.width = video.videoWidth;
     canvas.height = video.videoHeight;
     canvas.getContext('2d').drawImage(video, 0, 0);
     var imgData = canvas.toDataURL("img/png");
     //imgData = imgData.replace('data:image/png;base64, ',' ');
     //var postData = JSON.stringify({imageData: imgData});
     alert(imgData);
  }




</script>
</body>
</html>
